{"version":3,"sources":["webpack://gatsby-shopify-course/./src/components/LayoutBoutique/index.js","webpack://gatsby-shopify-course/./src/templates/ProductTemplate/styles.js","webpack://gatsby-shopify-course/./src/templates/ProductTemplate/index.js"],"names":["LayoutBoutique","children","className","Price","styled","ProductTemplate","props","getProductById","React","CartContext","product","setProduct","selectedVariant","setSelectedVariant","useLocation","search","origin","pathname","variantId","queryString","variant","data","shopifyProduct","shopifyId","then","result","variants","find","id","description","title","onClick","navigate","selectedVariantImageId","image","images","availableForSale","price","length","value","onChange","e","newVariant","v","target","encodeURIComponent","replace","map","key","selectedOptions","name","available","dangerouslySetInnerHTML","__html","descriptionHtml"],"mappings":"qMAMMA,EAAiB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACxB,OACE,gCACM,uBAAKC,UAAU,oCAEnB,gBAAC,IAAD,MACE,wBAAMA,UAAU,iBAAiBD,EAAjC,KACA,gBAAC,IAAD,U,wHCgBKE,GA3BOC,wBAAH,wDAAGA,CAAH,wLAmBYA,oBAAH,iEAAGA,CAAH,gEAQLA,oBAAH,yDAAGA,CAAH,qD,8BCVH,SAASC,EAAgBC,GAAQ,IACtCC,EAAmBC,aAAiBC,KAApCF,eADqC,EAEfC,WAAe,MAAtCE,EAFsC,KAE7BC,EAF6B,OAGCH,WAAe,MAAtDI,EAHsC,KAGrBC,EAHqB,QAIRC,mBAA7BC,EAJqC,EAIrCA,OAAQC,EAJ6B,EAI7BA,OAAQC,EAJqB,EAIrBA,SAClBC,EAAYC,QAAkBJ,GAAQK,QAE5CZ,aAAgB,WACdD,EAAeD,EAAMe,KAAKC,eAAeC,WAAWC,MAAK,SAAAC,GACvDd,EAAWc,GACXZ,EACEY,EAAOC,SAASC,MAAK,qBAAGC,KAAgBV,MAAcO,EAAOC,SAAS,SAGzE,CACDnB,EACAI,EACAL,EAAMe,KAAKC,eAAeC,UAC1BL,IAcF,OACG,gBAAClB,EAAA,EAAD,KACD,gBAAC,KAAD,CACE6B,YAAavB,EAAMe,KAAKC,eAAeO,YACvCC,MAAOxB,EAAMe,KAAKC,eAAeQ,QAEnC,uBAAK5B,UAAU,+DACf,0BAAQA,UAAU,0DAAyD6B,QAAS,kBAAMC,eAAU,KAApG,wBAEA,2BACI,gBAAC,KAAD,CACEC,uBAAwBrB,aAAF,EAAEA,EAAiBsB,MAAMN,GAC/CO,OAAQ7B,EAAMe,KAAKC,eAAea,UANxC,WAUgB,uBAAKjC,UAAU,iCAC7B,0BAAQA,UAAU,gEAA+D6B,QAAS,kBAAMC,eAAU,KAA1G,wBACE,sBAAI9B,UAAU,mEAAoEI,EAAMe,KAAKC,eAAeQ,QAC3GpB,aAAA,EAAAA,EAAS0B,qBAAsBxB,GAC9B,gCACgB,gBAACT,EAAD,KAASS,EAAgByB,MAAzB,OAEb3B,aAAA,EAAAA,EAASgB,SAASY,QAAS,GAExB,uBAAKpC,UAAU,yBACf,qBAAGA,UAAU,yDAAb,WACA,uBAAKA,UAAU,kBACf,0BACAA,UAAU,wDACRqC,MAAO3B,EAAgBgB,GACvBY,SA1CY,SAAAC,GAC1B,IAAMC,EAAahC,aAAH,EAAGA,EAASgB,SAASC,MAAK,SAAAgB,GAAC,OAAIA,EAAEf,KAAOa,EAAEG,OAAOL,SACjE1B,EAAmB6B,IACnBV,cAAS,GACJhB,EAASC,EADN,YAC0B4B,mBAAmBH,EAAWd,IAC9D,CACEkB,SAAS,MAsCEpC,aALH,EAKGA,EAASgB,SAASqB,KAAI,SAAAJ,GAAC,OACtB,0BACAK,IAAKL,EAAEf,GAAIW,MAAOI,EAAEf,IACjBe,EAAEM,gBAAgBC,KAClBP,EAAEb,eAQVlB,GACD,gCACE,gBAAC,KAAD,CACEuC,UAAWvC,EAAgBuC,UAC3BjC,UAAWN,EAAgBgB,SASzC,uBAAK1B,UAAU,qFAEb,uBAAKA,UAAU,gBACP,qBAAGA,UAAU,gDAAb,2BAEV,qBAAGA,UAAU,QACb,uBAAKkD,wBAAyB,CAAEC,OAAQ/C,EAAMe,KAAKC,eAAegC","file":"component---src-templates-product-template-index-js.js","sourcesContent":["//import { fromJSON } from 'postcss';\nimport React from 'react';\nimport HeaderBoutique from '../HeaderBoutique'\nimport { Footer } from '../footer/';\nimport \"@fontsource/roboto\"\nimport \"@fontsource/dancing-script\"\nconst LayoutBoutique = ({ children }) => {\n  return (\n    <>\n          <div className=\"site min-h-screen flex flex-col \">\n\n      <HeaderBoutique/>\n        <main className=\"mt-10 md:mt-0\">{children} </main>\n        <Footer />\n        </div>\n    </>\n  );\n};\n\nexport { LayoutBoutique };\n","import styled from 'styled-components';\n\nexport const Grid = styled.section`\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: 20px;\n  margin-top: 20px;\n\n  @media (min-width: 768px) {\n    grid-template-columns: 1fr 1fr;\n\n    > div:first-child {\n      order: 2;\n    }\n\n    > div:last-child {\n      order: 1;\n    }\n  }\n`;\n\nexport const SelectWrapper = styled.div`\n  margin-top: 40px;\n  > strong {\n    display: block;\n    margin-bottom: 8px;\n  }\n`;\n\nexport const Price = styled.div`\n  margin: 20px 0;\n  font-weight: bold;\n  font-size: 30px;\n`;\n","import React from 'react';\nimport { graphql } from 'gatsby';\nimport { LayoutBoutique } from 'components/LayoutBoutique'\nimport {ImageGallery,ProductQuantityAdder,SEO,} from 'components';\nimport { Price } from './styles';\nimport CartContext from 'context/CartContext';\nimport { navigate, useLocation } from '@reach/router';\nimport queryString from 'query-string';\n\n\nexport const query = graphql`\n  query ProductQuery($shopifyId: String) {\n    shopifyProduct(shopifyId: { eq: $shopifyId }) {\n      descriptionHtml\n      ...ShopifyProductFields\n    }\n  }\n`;\n\nexport default function ProductTemplate(props) {\n  const { getProductById } = React.useContext(CartContext);\n  const [product, setProduct] = React.useState(null);\n  const [selectedVariant, setSelectedVariant] = React.useState(null);\n  const { search, origin, pathname } = useLocation();\n  const variantId = queryString.parse(search).variant;\n\n  React.useEffect(() => {\n    getProductById(props.data.shopifyProduct.shopifyId).then(result => {\n      setProduct(result);\n      setSelectedVariant(\n        result.variants.find(({ id }) => id === variantId) || result.variants[0]\n      );\n    });\n  }, [\n    getProductById,\n    setProduct,\n    props.data.shopifyProduct.shopifyId,\n    variantId,\n  ]);\n\n  const handleVariantChange = e => {\n    const newVariant = product?.variants.find(v => v.id === e.target.value);\n    setSelectedVariant(newVariant);\n    navigate(\n      `${origin}${pathname}?variant=${encodeURIComponent(newVariant.id)}`,\n      {\n        replace: true,\n      }\n    );\n  };\n\n  return (\n     <LayoutBoutique>\n    <SEO\n      description={props.data.shopifyProduct.description}\n      title={props.data.shopifyProduct.title}\n    />\n    <div className=\"flex flex-col md:flex-row content-center m-auto w-2/3 mt-10\" >\n    <button className=\"border-2 md:hidden px-2 mb-10 text-xl p-1 rounded-full \"onClick={() => navigate(-1)}>Revenir aux produits</button>\n\n    <div>\n        <ImageGallery\n          selectedVariantImageId={selectedVariant?.image.id}\n          images={props.data.shopifyProduct.images}\n          \n          \n        />\n      </div>        <div className=\"mt-4 md:mt-0 md:w-2/3 md:mx-8\"> \n      <button className=\"border-2 hidden md:block px-2 mb-10 text-xl p-1 rounded-full \"onClick={() => navigate(-1)}>Revenir aux produits</button>\n        <h1 className=\"title-article mb-5 DancingScript text-4xl md:text-5xl font-bold\" >{props.data.shopifyProduct.title}</h1>\n        {product?.availableForSale && !!selectedVariant && (\n          <>\n                          <Price >{selectedVariant.price} â‚¬</Price> \n\n            {product?.variants.length > 1 && (\n              \n                <div className=\" flex flex-col  mt-0 \">\n                <p className=\"mb-3 title-article text-2xl font-bold DancingScript  \">Options</p>\n                <div className=\" flex flex-row\">\n                <select                     \n                className=\"bg-transparent border-boutique h-10  w-32 rounded p-1\"\n                  value={selectedVariant.id}\n                  onChange={handleVariantChange}\n                >\n                  {product?.variants.map(v => (\n                    <option\n                    key={v.id} value={v.id}>\n                      {v.selectedOptions.name}\n                      {v.title}\n                    </option>\n                  ))}\n                </select>\n                </div>\n                </div>\n              \n            )}\n            {!!selectedVariant && (\n              <>\n                <ProductQuantityAdder\n                  available={selectedVariant.available}\n                  variantId={selectedVariant.id}\n                />\n              </>\n            )}\n          </>\n        )}\n      </div>\n     \n    </div>\n    <div className=\" markdown description mt-14 mb-4 w-10/12 md:w-2/3  m-auto border-2t  pb-10  mb-8 \"\n    >\n      <div className=\"buy-boutique\">\n              <p className=\" pl-4 py-1 text-3xl text-white DancingScript\">Description du produit</p>\n              </div>\n    <p className=\"px-5\">\n    <div dangerouslySetInnerHTML={{ __html: props.data.shopifyProduct.descriptionHtml} } />\n\n    \n    </p>\n\n</div>\n  </LayoutBoutique>\n  );\n}\n"],"sourceRoot":""}